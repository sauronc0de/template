# CMake the qpcpp libraries for different targets
set(PORT_DIR ${PORT})
if((PORT STREQUAL win32) OR (PORT STREQUAL posix))
    if(QPCPP_CFG_UNIT_TEST)
        set(PORT_DIR ${PORT_DIR}-qutest)
    elseif(KERNEL STREQUAL qv)
        set(PORT_DIR ${PORT_DIR}-qv)
    endif()
endif()
if(EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/${PORT_DIR})
    message(STATUS "Found port dir - './${PORT_DIR}' for port ${PORT}, KERNEL ${KERNEL}")
else()
    message(FATAL_ERROR "Target port dir '${CMAKE_CURRENT_SOURCE_DIR}/${PORT_DIR}' not found!")
endif()

add_subdirectory(${PORT_DIR})
if(NOT QPCPP_CFG_QPCONFIG_H_INCLUDE_PATH)
    set(QPCPP_CFG_QPCONFIG_H_INCLUDE_PATH config)
endif()
target_include_directories(qpcpp PUBLIC ${QPCPP_CFG_QPCONFIG_H_INCLUDE_PATH})
